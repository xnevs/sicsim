hanoi	START	0

	JSUB	SINIT
	
	LDA	#6
	LDS	STARTS
	JSUB	hanoir
HALT	J	HALT

hanoir	COMP	#0
	JEQ	HKONEC
	STL	@SPTR
	JSUB	SPUSH
	STA	@SPTR
	JSUB	SPUSH
	STS	@SPTR
	JSUB	SPUSH

	SUB	#1
	
	. JSUB	hanoir S[0] -> S[2]

	STA	@SPTR
	JSUB	SPUSH
	CLEAR	A
	ADDR	S,A
	AND	FFNIC
	STA	@SPTR

	CLEAR	A
	ADDR	S,A
	SHIFTL	A,16
	AND	FFNIC
	SHIFTL	A,16
	OR	@SPTR
	STA	@SPTR

	CLEAR	A
	ADDR	S,A
	SHIFTL	A,8
	AND	FFNIC
	SHIFTL	A,8
	OR	@SPTR

	CLEAR	S
	ADDR	A,S

	JSUB	SPOP
	LDA	@SPTR

	JSUB	hanoir

	STS	@SPTR
	JSUB	SPOP
	LDS	@SPTR
	JSUB	SPUSH
	JSUB	SPUSH
	. move S[0]->S[1]
	JSUB	print

	JSUB	SPOP
	LDS	@SPTR

	. JSUB	hanoir S[2] -> S[1]
	SHIFTL	S,8
	JSUB	hanoir
	
	
	JSUB	SPOP
	LDS	@SPTR
	JSUB	SPOP
	LDA	@SPTR
	JSUB	SPOP
	LDL	@SPTR
HKONEC	RSUB

print	STL	@SPTR
	JSUB	SPUSH
	STA	@SPTR
	JSUB	SPUSH

	CLEAR	A
	ADDR	S,A
	STA	@SPTR

	SHIFTL	A,8
	WD	ENA
	LDA	#32
	WD	ENA
	LDA	#45
	WD	ENA
	LDA	#62
	WD	ENA
	LDA	#32
	WD	ENA
	LDA	@SPTR
	SHIFTL	A,16
	WD	ENA
	LDA	#10
	WD	ENA
	

	JSUB	SPOP
	LDA	@SPTR
	JSUB	SPOP
	LDL	@SPTR
	RSUB

STARTS	WORD	0x414342



SINIT	STA	TMP
	LDA	#STACK
	STA	SPTR
	LDA	TMP
	RSUB

SPUSH	STA	TMP
	LDA	SPTR
	ADD	#3
	STA	SPTR
	LDA	TMP
	RSUB

SPOP	STA	TMP
	LDA	SPTR
	SUB	#3
	STA	SPTR
	LDA	TMP
	RSUB
	
FFNIC	WORD	0xFF0000
ENA	BYTE	1

TMP	WORD	1
SPTR	WORD	1
	LTORG
STACK	RESW	100
